# -*- Mode: YAML; indent-tabs-mode: nil; tab-width: 2 -*-

name: dwarf-fortress
version: 0.44.12
summary: Dwarf Fortress world simulator
description: |
  Dwarf Fortress is a single-player fantasy game by Bay 12 Games. You can control a dwarven outpost or an adventurer in a randomly generated, persistent world.
  
  This is an unofficial snap, which redistributes the original binaries without modification.
  
  Upstream: http://www.bay12games.com/dwarves/
confinement: strict
grade: stable
architectures: [amd64]

parts:
  tarball:
    plugin: dump
    source: http://www.bay12games.com/dwarves/df_44_12_linux.tar.bz2
    source-checksum: sha512/03cd7f6800d44873b573cc5bffb12c7a246c3aba0ee8535001372df689a5179dc02592670fd87f2fd5de82421605f34152f6241307c8f7b9fb4d7b8704aed70c
    override-build: |
      chmod a+x df
      find . -type d -exec chmod a+rx {} +
      snapcraftctl build
    prime:
      - -g_src
      - -libs/libstdc++.so.6
  desktop-gtk2:
    after: [] # just so the remote part gets defined
  deps:
    plugin: nil
    stage-packages:
      - freeglut3
      - libglu1-mesa
      - libopenal1
      - libsdl-image1.2
      - libsdl-ttf2.0-0
  overlay:
    plugin: dump
    source: overlay

apps:
  dwarf-fortress:
    command: desktop-launch $SNAP/wrapper
    plugs: [opengl, pulseaudio, x11, unity7]
